<!DOCTYPE html>
<html>
<head>
    <title>Register - Navajanani</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="wizard-container">

    <h2>Create Account</h2>

    <!-- STEP 1 -->
    <div class="step active" id="step1">
        <div class="input-group">
            <input type="text" id="regName" required>
            <label>Full Name</label>
        </div>

        <div class="input-group">
            <input type="email" id="regEmail" required>
            <label>Email Address</label>
        </div>

        <button onclick="nextStep(2)">Next</button>
    </div>

    <!-- STEP 2 -->
    <div class="step" id="step2">
        <div class="input-group">
            <input type="password" id="regPassword" required>
            <label>Password</label>
        </div>

        <div class="input-group">
            <input type="password" id="confirmPassword" required>
            <label>Confirm Password</label>
        </div>

        <button onclick="sendOTP()">Send OTP</button>
    </div>

    <!-- STEP 3 OTP -->
    <div class="step" id="step3">
        <p>Enter OTP sent to your email</p>

        <div class="input-group">
            <input type="text" id="otpInput" required>
            <label>Enter OTP</label>
        </div>

        <button onclick="verifyOTP()">Verify OTP</button>
    </div>

</div>

<script>
let generatedOTP = "";

// Step Navigation
function nextStep(stepNumber) {
    document.querySelectorAll(".step").forEach(step => step.classList.remove("active"));
    document.getElementById("step" + stepNumber).classList.add("active");
}

// Basic Password Encryption (Demo level)
function encryptPassword(password) {
    return btoa(password); 
}

// Send OTP (Simulation)
function sendOTP() {

    let password = document.getElementById("regPassword").value;
    let confirmPassword = document.getElementById("confirmPassword").value;

    if(password === "" || confirmPassword === "") {
        alert("Please enter password");
        return;
    }

    if(password !== confirmPassword) {
        alert("Passwords do not match");
        return;
    }

    generatedOTP = Math.floor(100000 + Math.random() * 900000);

    alert("Your OTP is: " + generatedOTP); // Demo purpose only

    nextStep(3);
}

// Verify OTP
function verifyOTP() {

    let enteredOTP = document.getElementById("otpInput").value;

    if(enteredOTP == generatedOTP) {

        let name = document.getElementById("regName").value;
        let email = document.getElementById("regEmail").value;
        let password = encryptPassword(document.getElementById("regPassword").value);

        localStorage.setItem("userName", name);
        localStorage.setItem("userEmail", email);
        localStorage.setItem("userPassword", password);

        alert("Registration Successful!");
        window.location.href = "login.html";

    } else {
        alert("Invalid OTP");
    }
}
</script>

</body>
</html>
